build:
  gpu: true
  system_packages:
    - "ffmpeg"
    - "libavcodec-dev"
    - "sox"

  python_version: "3.10"
  
  python_packages:
    - numpy<2
    - torch
    - torchaudio
    - torchvision
    - transformers
    - regex
    - librosa
    - vocos
    - encodec
    - whisperx==3.1.1
    - openai-whisper>=20231117
    - pydub
  run:
    - python -c "import torch; torch.hub.load('Camb-ai/mars5-tts', 'mars5_english', trust_repo=True)"
    - pip install pyupload

predict: "predict.py:Predictor"
